/* ====================================================================
   後台管理 (Backend) 專用樣式表
   - V10: 微調 filter-bar 樣式
   ==================================================================== */

body { display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

/* 後台主佈局 */
.backend-app { display: flex; flex-grow: 1; overflow: hidden; }
.backend-nav { flex: 0 0 200px; background-color: var(--secondary-color); padding: 20px; box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1); z-index: 10; }
.backend-nav ul { list-style: none; padding: 0; margin: 0; }
.backend-nav li a { display: block; padding: 12px 15px; color: var(--secondary-color-light); text-decoration: none; border-radius: var(--border-radius); transition: background-color 0.2s; }
.backend-nav li { cursor: pointer; }
.backend-nav li:hover a { background-color: #34495e; }
.backend-nav li.active a { background-color: var(--primary-color); color: white; font-weight: 700; }
.backend-content { flex-grow: 1; padding: 25px; background-color: #f4f7f6; overflow-y: auto; }
.content-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--border-color); padding-bottom: 15px; margin-bottom: 20px; }
.content-header h1 { margin: 0; color: var(--secondary-color); }

/* 通用按鈕 */
.btn-primary { background-color: var(--primary-color); color: white; border: none; padding: 10px 18px; border-radius: var(--border-radius); cursor: pointer; font-size: 1em; font-weight: 700; transition: background-color 0.2s; }
.btn-primary:hover { background-color: #2980b9; }
.btn-secondary { background-color: var(--button-bg-light); color: var(--text-color-dark); border: 1px solid var(--border-color); padding: 10px 18px; border-radius: var(--border-radius); cursor: pointer; font-size: 1em; font-weight: 700; transition: background-color 0.2s; }
.btn-secondary:hover { background-color: #e0e0e0; }
.btn-danger { background-color: var(--danger-color); color: white; padding: 5px 10px; font-size: 0.9em; border: none; border-radius: var(--border-radius); cursor: pointer; transition: background-color 0.2s; }
.btn-danger:hover { background-color: #c0392b; }

/* 表格 */
.table-container { width: 100%; overflow-x: auto; background-color: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); }
#product-list-table,
#employee-list-table,
#order-list-table { width: 100%; border-collapse: collapse; font-size: 0.95em; }
#product-list-table th,
#product-list-table td,
#employee-list-table th,
#employee-list-table td,
#order-list-table th,
#order-list-table td { padding: 12px 15px; border-bottom: 1px solid var(--soft-border); text-align: left; vertical-align: middle; white-space: nowrap; }
#product-list-table th,
#employee-list-table th,
#order-list-table th { background-color: var(--secondary-color-light); font-weight: 700; color: var(--secondary-color); position: sticky; top: 0; }
#product-list-table tbody tr:hover,
#employee-list-table tbody tr:hover { background-color: #f9f9f9; }
#order-list-table tbody tr.order-row:hover { background-color: #f9f9f9; cursor: pointer; }
/* 欄位對齊 */
#product-list-table th:nth-child(n+4),
#product-list-table td:nth-child(n+4) { text-align: right; }
#product-list-table th:last-child,
#product-list-table td:last-child,
#product-list-table th:nth-child(8),
#product-list-table td:nth-child(8),
#product-list-table th:nth-child(9),
#product-list-table td:nth-child(9) { text-align: center; }
#employee-list-table th:nth-child(4),
#employee-list-table td:nth-child(4),
#employee-list-table th:nth-child(5),
#employee-list-table td:nth-child(5) { text-align: center; }
/* [V10 修改] 訂單表格對齊 (因新增欄位，索引+1) */
#order-list-table th:nth-child(1), /* 第幾筆 */
#order-list-table td:nth-child(1) { text-align: center; }
#order-list-table th:nth-child(5), /* 總金額 */
#order-list-table td:nth-child(5) { text-align: right; }
#order-list-table th:nth-child(6), /* 操作 */
#order-list-table td:nth-child(6) { text-align: center; }

#product-list-table td .btn-secondary,
#employee-list-table td .btn-secondary,
#order-list-table td .btn-secondary { padding: 5px 10px; font-size: 0.9em; margin-right: 5px; }
.loading-message { text-align: center; color: var(--text-color-light); font-style: italic; padding: 30px; }

/* 表單 (Modal) */
#product-modal .modal-content { max-width: 800px; text-align: left; }
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
.form-group { display: flex; flex-direction: column; }
.form-group label { font-weight: 700; margin-bottom: 6px; font-size: 0.9em; }
.form-group input[type="text"],
.form-group input[type="number"],
.form-group input[type="password"],
.form-group input[type="date"],
.form-group input[type="time"]
{ width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: var(--border-radius); font-size: 1em; box-sizing: border-box; }
.form-group-checkbox { grid-column: 1 / -1; flex-direction: row; align-items: center; margin-top: 10px; }
.form-group-checkbox input { margin-right: 10px; width: auto; }
.form-actions { display: flex; justify-content: flex-end; gap: 10px; border-top: 1px solid var(--soft-border); padding-top: 20px; margin-top: 10px; }
.error-message { color: var(--danger-color); font-weight: bold; margin-top: 15px; text-align: center; }

/* 狀態顯示 */
.status-active { color: #27ae60; font-weight: 700; }
.status-inactive { color: var(--danger-color); font-weight: 700; }

/* 商品排序按鈕 */
#product-list-table th.col-sort,
#product-list-table td.product-sort { text-align: center; width: 100px; }
.sort-btn { background: none; border: 1px solid var(--border-color); color: var(--text-color-dark); cursor: pointer; border-radius: var(--border-radius); font-size: 1.1em; width: 40px; padding: 2px 0; margin: 0 3px; transition: background-color 0.2s, color 0.2s; }
.sort-btn:hover:not(:disabled) { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
.sort-btn:disabled { color: var(--border-color); cursor: not-allowed; background-color: #f9f9f9; }

/* 分頁系統 */
.management-section { display: none; }
.management-section.active { display: block; }

/* 員工 Modal */
#employee-modal .modal-content { max-width: 500px; text-align: left; }
.form-grid-small { grid-template-columns: 1fr; gap: 15px; }

/* [V10 修改] 篩選列樣式 (減少 gap，調整按鈕) */
.filter-bar {
    display: flex;
    flex-wrap: wrap; 
    align-items: flex-end; 
    gap: 10px; /* 減少間距 */
    background-color: white;
    padding: 15px 20px; /* 調整 padding */
    border-radius: 8px;
    margin-bottom: 20px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}
.filter-group { display: flex; flex-direction: column; gap: 5px; }
.filter-group label { font-size: 0.9em; font-weight: 700; color: var(--text-color-dark); }
.filter-group input[type="number"], /* [V10] number input */
.filter-group input[type="text"] { 
    padding: 8px 10px; 
    font-size: 0.95em; 
    width: 150px; /* 固定寬度 */
}
.filter-bar .btn-primary,
.filter-bar .btn-secondary {
    padding: 9px 15px; 
    font-size: 0.95em;
    height: 38px; /* 調整高度以匹配 input */
    margin-bottom: 0; /* [V10] 移除底部 margin */
}

/* 可展開式訂單 (Accordion) */
.order-row td { transition: background-color 0.2s; }
.order-row.expanded td { background-color: var(--secondary-color-light); border-bottom: none; }
.order-detail-row { display: none; }
.order-detail-row.expanded { display: table-row; }
.order-detail-cell { padding: 0 !important; border-bottom: 1px solid var(--soft-border); }
.order-detail-content { background-color: #fdfdfd; padding: 20px; }
.expand-arrow { display: inline-block; margin-right: 10px; font-size: 0.8em; transition: transform 0.2s; cursor: pointer; color: var(--primary-color); }
.order-row.expanded .expand-arrow { transform: rotate(90deg); }

/* 訂單明細 (展開後) */
#order-details-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
#order-details-table th,
#order-details-table td { padding: 10px 12px; border-bottom: 1px solid var(--soft-border); text-align: left; }
#order-details-table th { background-color: #f1f1f1; }
#order-details-table th:nth-child(n+2),
#order-details-table td:nth-child(n+2) { text-align: right; }
.order-detail-summary { display: flex; gap: 20px; margin-bottom: 15px; }
.order-detail-summary p { margin: 0; }/* ====================================================================
   V10.1: 後台訂單明細的「商品備註」樣式
   ==================================================================== */

/* 顯示在 "訂單查詢" -> "展開明細" -> "品名" 下方的備註 */
.item-note-display-backend {
    display: block; /* 顯示在品名下方 */
    font-size: 0.9em;
    color: var(--danger-color);
    font-weight: 700;
    margin-top: 5px;
    white-space: normal; /* 允許備註文字換行 */
    max-width: 300px; /* 避免過長 */
}
/* ====================================================================
   V16: 折扣管理 (Discount) 模組樣式
   ==================================================================== */

/* [V16] 擴充共用表格樣式 */
#discount-list-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.95em;
}

#discount-list-table th,
#discount-list-table td {
    padding: 12px 15px;
    border-bottom: 1px solid var(--soft-border);
    text-align: left;
    vertical-align: middle;
    white-space: nowrap;
}

#discount-list-table th {
    background-color: var(--secondary-color-light);
    font-weight: 700;
    color: var(--secondary-color);
    position: sticky;
    top: 0;
}

#discount-list-table tbody tr:hover {
    background-color: #f9f9f9;
}

#discount-list-table td .btn-secondary {
    padding: 5px 10px;
    font-size: 0.9em;
    margin-right: 5px;
}

/* [V16] 折扣表格欄位對齊 */
#discount-list-table th:nth-child(3), /* 金額 */
#discount-list-table td:nth-child(3) {
    text-align: right;
}
#discount-list-table th:nth-child(4), /* 狀態 */
#discount-list-table td:nth-child(4),
#discount-list-table th:nth-child(5), /* 操作 */
#discount-list-table td:nth-child(5)
{
    text-align: center;
}

/* [V16] 折扣 Modal (共用 .form-grid-small) */
#discount-modal .modal-content {
    max-width: 500px;
    text-align: left;
}